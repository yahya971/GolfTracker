// script.js
document.addEventListener("DOMContentLoaded", function() {
    var canvas = document.getElementById("golfCanvas");
    var ctx = canvas.getContext("2d");
    var idFilter = document.getElementById("idFilter");
    var filterButton = document.getElementById("filterButton");


    // Variables for customization
    var width = 600; // Width of the canvas
    var height = 400; // Height of the canvas
    var holePosition = { x: 336, y: 83 }; // Position of the hole

    // Set canvas dimensions
    canvas.width = width;
    canvas.height = height;

    // Function to draw the hole
    function drawHole() {
        ctx.beginPath();
        ctx.arc(holePosition.x, holePosition.y, 10, 0, 2 * Math.PI, false);
        ctx.fillStyle = 'black'; // Color of the hole
        ctx.fill();
        ctx.lineWidth = 2;
        ctx.strokeStyle = '#003300';
        ctx.stroke();
    }

    // Function to draw the ball at each position
    function drawBall(x, y, color, number) {
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, 2 * Math.PI); // Ball with radius of 5
        ctx.fillStyle = color; // Use the provided color
        ctx.fill();
        ctx.lineWidth = 1;
        ctx.strokeStyle = '#000000';
        ctx.stroke();

        // Draw the number if provided
        if (number !== undefined) {
            ctx.fillStyle = 'black';
            ctx.font = '12px Arial';
            ctx.fillText(number, x + 10, y + 5);
        }
    }

    // Generate a random color
    function getRandomColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return '#ffff'
        //return color;
    }

    // Example ball path data for multiple trajectories
    var ballPathDataArray = JSON.parse('[{"id":750414,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":3,"tee":1,"made":1,"ballPath":"[[272,316,5],[272,316,5],[273,305,17],[273,305,17],[277,284,24],[277,284,24],[277,284,24],[282,256,26],[282,256,26],[282,256,26],[285,226,29],[285,226,29],[294,195,31],[294,195,31],[294,195,31],[301,164,32],[301,164,32],[301,164,32],[310,132,33],[310,132,33],[318,102,33],[318,102,33],[318,102,33],[329,75,28],[329,75,28],[329,75,28],[336,57,20],[336,57,20],[342,50,10],[342,50,10],[342,50,10]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:35:03.000Z"},{"id":750416,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":3,"tee":2,"made":1,"ballPath":"[[342,309,15],[342,309,15],[342,309,15],[342,292,22],[342,292,22],[342,268,24],[342,268,24],[342,268,24],[342,244,25],[342,244,25],[342,244,25],[341,219,27],[341,219,27],[341,219,27],[340,194,28],[340,194,28],[339,169,29],[339,169,29],[339,169,29],[337,146,29],[337,146,29],[337,146,29],[337,123,29],[337,123,29],[335,102,26],[335,102,26],[335,102,26],[334,86,22],[334,86,22],[334,86,22],[334,68,21],[334,68,21],[334,54,16],[334,54,16],[334,54,16]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:35:13.000Z"},{"id":750417,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":3,"tee":3,"made":1,"ballPath":"[[380,314,13],[380,314,13],[376,300,19],[376,300,19],[376,300,19],[369,280,23],[369,280,23],[369,280,23],[362,258,24],[362,258,24],[354,235,26],[354,235,26],[354,235,26],[344,212,27],[344,212,27],[336,190,28],[336,190,28],[336,190,28],[325,168,28],[325,168,28],[325,168,28],[314,148,29],[314,148,29],[302,130,29],[302,130,29],[302,130,29],[294,110,28],[294,110,28],[294,110,28],[287,92,27],[287,92,27],[287,92,27],[291,76,27],[291,76,27],[291,76,27],[299,63,27],[299,63,27],[312,58,26],[312,58,26],[312,58,26],[327,57,25],[327,57,25],[339,64,22],[339,64,22],[339,64,22],[350,68,20],[350,68,20],[350,68,20],[363,65,19],[363,65,19],[363,65,19],[373,65,16],[373,65,16],[379,64,9],[379,64,9],[379,64,9]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:35:30.000Z"},{"id":750418,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":4,"tee":1,"made":0,"ballPath":"[[318,315,13],[318,315,13],[322,296,22],[322,296,22],[322,296,22],[330,268,27],[330,268,27],[330,268,27],[342,236,30],[342,236,30],[351,202,32],[351,202,32],[351,202,32],[351,202,32],[363,167,34],[378,134,35],[378,134,35],[378,134,35],[385,98,35],[385,98,35],[396,66,35],[396,66,35],[396,66,35],[402,38,33],[402,38,33],[402,38,33],[410,16,28],[410,16,28],[412,2,23],[412,2,23],[412,2,23]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:35:57.000Z"},{"id":750419,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":4,"tee":2,"made":1,"ballPath":"[[346,306,17],[346,306,17],[346,306,17],[346,284,24],[346,284,24],[346,254,27],[346,254,27],[346,254,27],[346,222,29],[346,222,29],[346,222,29],[346,222,29],[346,190,32],[346,190,32],[345,157,33],[345,157,33],[345,157,33],[346,124,33],[346,124,33],[346,124,33],[344,92,30],[344,92,30],[344,92,30],[342,68,23],[342,68,23],[342,68,23],[340,53,15],[340,53,15]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:36:05.000Z"},{"id":750421,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":4,"tee":3,"made":0,"ballPath":"[[358,316,13],[358,316,13],[358,316,13],[356,298,21],[356,298,21],[356,298,21],[349,276,25],[349,276,25],[349,276,25],[340,248,26],[340,248,26],[333,220,29],[333,220,29],[333,220,29],[324,192,30],[324,192,30],[324,192,30],[314,164,31],[314,164,31],[304,137,31],[304,137,31],[304,137,31],[296,110,31],[296,110,31],[296,110,31],[289,85,29],[289,85,29],[289,85,29],[297,62,30],[297,62,30],[311,46,31],[311,46,31],[311,46,31],[326,34,30],[326,34,30],[326,34,30],[341,27,30],[341,27,30],[357,23,29],[357,23,29],[357,23,29],[372,23,29],[372,23,29],[385,26,29],[385,26,29],[385,26,29],[399,29,29],[399,29,29],[412,34,29],[412,34,29],[412,34,29],[424,40,29],[424,40,29],[435,52,28],[435,52,28],[435,52,28],[444,64,28],[444,64,28],[444,64,28],[454,78,28],[454,78,28],[461,94,27],[461,94,27],[461,94,27],[468,111,27],[468,111,27],[474,129,26],[474,129,26],[474,129,26],[480,148,26],[480,148,26],[485,168,25],[485,168,25],[485,168,25],[489,187,24],[489,187,24],[490,208,23],[490,208,23],[490,208,23],[492,228,22],[492,228,22],[494,246,20],[494,246,20],[494,246,20],[492,264,19],[492,264,19],[490,281,17],[490,281,17],[490,281,17],[488,298,15],[488,298,15],[488,298,15],[486,309,10],[486,309,10],[486,309,10]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:36:13.000Z"},{"id":750422,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":5,"tee":1,"made":1,"ballPath":"[[294,314,13],[294,314,13],[294,314,13],[294,297,22],[294,297,22],[298,270,25],[298,270,25],[298,270,25],[302,242,27],[302,242,27],[304,210,30],[304,210,30],[304,210,30],[308,178,32],[308,178,32],[308,178,32],[315,147,33],[315,147,33],[320,115,33],[320,115,33],[320,115,33],[328,86,29],[328,86,29],[334,65,22],[334,65,22],[334,65,22],[336,52,14],[336,52,14]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:36:40.000Z"},{"id":750423,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":5,"tee":2,"made":1,"ballPath":"[[347,313,13],[347,313,13],[348,297,21],[348,297,21],[348,297,21],[351,273,24],[351,273,24],[351,273,24],[352,247,25],[352,247,25],[353,220,27],[353,220,27],[353,220,27],[354,193,29],[354,193,29],[356,166,29],[356,166,29],[356,166,29],[358,140,29],[358,140,29],[358,140,29],[358,116,29],[358,116,29],[357,93,26],[357,93,26],[357,93,26],[355,75,22],[355,75,22],[354,62,18],[354,62,18],[354,62,18],[354,50,10],[354,50,10]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:36:47.000Z"},{"id":750425,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":5,"tee":3,"made":1,"ballPath":"[[389,306,16],[389,306,16],[389,306,16],[390,286,24],[390,286,24],[386,257,26],[386,257,26],[386,257,26],[384,226,29],[384,226,29],[383,194,31],[383,194,31],[383,194,31],[378,161,33],[378,161,33],[375,129,33],[375,129,33],[375,129,33],[368,98,32],[368,98,32],[359,71,27],[359,71,27],[359,71,27],[344,57,24],[344,57,24],[330,54,18],[330,54,18],[330,54,18],[321,48,8],[321,48,8]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:36:57.000Z"},{"id":750426,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":6,"tee":1,"made":1,"ballPath":"[[306,316,6],[306,316,6],[308,302,19],[308,302,19],[308,302,19],[310,277,26],[310,277,26],[315,244,29],[315,244,29],[315,244,29],[320,210,32],[320,210,32],[324,172,34],[324,172,34],[324,172,34],[328,134,35],[328,134,35],[336,98,33],[336,98,33],[336,98,33],[340,68,27],[340,68,27],[342,50,16],[342,50,16],[342,50,16]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:37:32.000Z"},{"id":750427,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":6,"tee":2,"made":0,"ballPath":"[[367,311,14],[367,311,14],[372,290,24],[372,290,24],[372,290,24],[375,258,28],[375,258,28],[380,223,31],[380,223,31],[380,223,31],[387,186,33],[387,186,33],[392,148,35],[392,148,35],[392,148,35],[398,110,35],[398,110,35],[400,72,35],[400,72,35],[400,72,35],[404,39,34],[404,39,34],[406,15,26],[406,15,26],[406,15,26],[408,2,19],[408,2,19]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:37:40.000Z"},{"id":750428,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":6,"tee":3,"made":1,"ballPath":"[[373,316,10],[373,316,10],[373,316,10],[372,298,21],[372,298,21],[371,267,28],[371,267,28],[371,267,28],[368,230,31],[368,230,31],[368,230,31],[363,190,35],[363,190,35],[362,146,36],[362,146,36],[362,146,36],[355,104,37],[355,104,37],[355,104,37],[347,66,31],[347,66,31],[334,66,25],[334,66,25],[334,66,25],[320,78,22],[320,78,22],[308,85,20],[308,85,20],[308,85,20],[298,87,19],[298,87,19],[298,87,19],[290,90,17],[290,90,17],[284,92,14],[284,92,14],[284,92,14],[282,94,8],[282,94,8]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:37:48.000Z"},{"id":750430,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":7,"tee":1,"made":0,"ballPath":"[[354,306,17],[354,306,17],[354,306,17],[362,282,27],[362,282,27],[362,282,27],[371,248,29],[371,248,29],[380,211,32],[380,211,32],[380,211,32],[389,173,34],[389,173,34],[398,134,35],[398,134,35],[398,134,35],[406,95,35],[406,95,35],[416,59,34],[416,59,34],[416,59,34],[424,28,32],[424,28,32],[429,7,24],[429,7,24],[429,7,24]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:38:18.000Z"},{"id":750431,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":7,"tee":2,"made":1,"ballPath":"[[313,316,11],[313,316,11],[312,299,21],[312,299,21],[312,299,21],[308,273,25],[308,273,25],[308,273,25],[306,242,28],[306,242,28],[304,208,31],[304,208,31],[304,208,31],[302,174,32],[302,174,32],[299,140,33],[299,140,33],[299,140,33],[297,106,33],[297,106,33],[301,77,30],[301,77,30],[301,77,30],[319,60,28],[319,60,28],[340,60,25],[340,60,25],[340,60,25],[356,65,21],[356,65,21],[370,67,17],[370,67,17],[370,67,17],[378,66,9],[378,66,9],[378,66,9]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:38:27.000Z"},{"id":750432,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":7,"tee":3,"made":1,"ballPath":"[[374,303,18],[374,303,18],[374,303,18],[374,274,27],[374,274,27],[374,274,27],[372,235,32],[372,235,32],[373,191,36],[373,191,36],[373,191,36],[371,145,38],[371,145,38],[371,145,38],[365,99,38],[365,99,38],[353,63,31],[353,63,31],[353,63,31],[324,56,30],[324,56,30],[304,72,27],[304,72,27],[304,72,27],[303,96,26],[303,96,26],[303,96,26],[320,112,28],[320,112,28],[342,120,25],[342,120,25],[342,120,25],[362,119,22],[362,119,22],[372,116,15],[372,116,15],[372,116,15]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:38:34.000Z"},{"id":750433,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":8,"tee":1,"made":1,"ballPath":"[[311,316,10],[311,316,10],[311,316,10],[312,300,21],[312,300,21],[316,274,25],[316,274,25],[316,274,25],[318,242,29],[318,242,29],[322,210,31],[322,210,31],[322,210,31],[324,174,33],[324,174,33],[328,139,33],[328,139,33],[328,139,33],[332,105,33],[332,105,33],[332,105,33],[337,75,27],[337,75,27],[339,56,17],[339,56,17],[339,56,17]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:39:04.000Z"},{"id":750434,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":8,"tee":2,"made":0,"ballPath":"[[301,312,14],[301,312,14],[301,312,14],[298,290,26],[298,290,26],[296,256,27],[296,256,27],[296,256,27],[290,220,32],[290,220,32],[290,220,32],[288,180,34],[288,180,34],[284,140,36],[284,140,36],[284,140,36],[280,99,36],[280,99,36],[282,61,36],[282,61,36],[282,61,36],[286,28,34],[286,28,34],[286,28,34],[287,8,24],[287,8,24]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:39:11.000Z"},{"id":750436,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":8,"tee":3,"made":0,"ballPath":"[[372,305,17],[372,305,17],[374,279,27],[374,279,27],[374,279,27],[374,242,30],[374,242,30],[373,202,34],[373,202,34],[373,202,34],[373,160,36],[373,160,36],[370,116,37],[370,116,37],[370,116,37],[364,75,35],[364,75,35],[344,51,33],[344,51,33],[344,51,33],[314,47,33],[314,47,33],[286,42,33],[286,42,33],[286,42,33],[262,46,33],[262,46,33],[238,51,32],[238,51,32],[238,51,32],[216,56,31],[216,56,31],[196,64,30],[196,64,30],[196,64,30],[178,75,29],[178,75,29],[178,75,29],[160,85,27],[160,85,27],[145,98,26],[145,98,26],[145,98,26],[132,112,25],[132,112,25],[120,127,24],[120,127,24],[120,127,24],[112,142,21],[112,142,21],[106,153,15],[106,153,15],[106,153,15],[112,183,13],[112,183,13],[116,196,17],[116,196,17],[116,196,17],[120,211,18],[120,211,18],[120,211,18],[126,226,19],[126,226,19],[132,242,19],[132,242,19],[132,242,19],[143,256,18],[143,256,18],[154,271,18],[154,271,18],[154,271,18],[163,287,17],[163,287,17],[176,301,16],[176,301,16],[176,301,16],[184,311,11],[184,311,11]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:39:21.000Z"},{"id":750438,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":9,"tee":1,"made":1,"ballPath":"[[324,303,18],[324,303,18],[328,274,27],[328,274,27],[328,274,27],[333,236,31],[333,236,31],[337,195,35],[337,195,35],[337,195,35],[342,150,37],[342,150,37],[346,105,37],[346,105,37],[346,105,37],[352,68,29],[352,68,29],[352,68,29],[333,66,28],[333,66,28],[312,76,25],[312,76,25],[312,76,25],[295,81,19],[295,81,19],[284,80,14],[284,80,14],[284,80,14]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:39:51.000Z"},{"id":750440,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":9,"tee":2,"made":0,"ballPath":"[[399,302,20],[399,302,20],[399,302,20],[411,274,28],[411,274,28],[411,274,28],[419,234,32],[419,234,32],[429,191,36],[429,191,36],[429,191,36],[438,146,37],[438,146,37],[446,100,38],[446,100,38],[446,100,38],[453,58,37],[453,58,37],[458,24,31],[458,24,31],[458,24,31],[460,3,20],[460,3,20],[460,3,20]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:39:58.000Z"},{"id":750443,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":9,"tee":3,"made":0,"ballPath":"[[312,316,9],[312,316,9],[310,298,22],[310,298,22],[310,298,22],[300,266,30],[300,266,30],[300,266,30],[290,226,33],[290,226,33],[280,183,37],[280,183,37],[280,183,37],[269,138,39],[269,138,39],[259,91,40],[259,91,40],[259,91,40],[250,48,38],[250,48,38],[240,18,29],[240,18,29],[232,2,16],[232,2,16],[232,2,16]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:40:08.000Z"},{"id":750447,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":10,"tee":1,"made":1,"ballPath":"[[298,303,18],[298,303,18],[300,277,26],[300,277,26],[300,277,26],[300,242,30],[300,242,30],[300,202,34],[300,202,34],[300,202,34],[302,162,36],[302,162,36],[304,118,36],[304,118,36],[304,118,36],[308,78,35],[308,78,35],[325,56,30],[325,56,30],[325,56,30],[350,68,27],[350,68,27],[368,76,22],[368,76,22],[368,76,22],[382,82,14],[382,82,14]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:40:35.000Z"},{"id":750449,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":10,"tee":2,"made":1,"ballPath":"[[342,309,15],[342,309,15],[342,309,15],[343,284,27],[343,284,27],[343,284,27],[344,245,32],[344,245,32],[346,201,36],[346,201,36],[346,201,36],[346,155,39],[346,155,39],[347,108,39],[347,108,39],[347,108,39],[345,66,32],[345,66,32],[332,68,27],[332,68,27],[332,68,27],[318,89,26],[318,89,26],[306,106,22],[306,106,22],[306,106,22],[296,114,17],[296,114,17],[293,114,16],[293,114,16],[293,114,16],[292,110,17],[292,110,17],[290,108,17],[290,108,17],[290,108,17],[290,104,17],[290,104,17],[292,99,18],[292,99,18],[292,99,18],[293,95,18],[293,95,18],[295,90,18],[295,90,18],[295,90,18],[297,84,18],[297,84,18],[297,84,18],[301,79,18],[301,79,18],[304,74,17],[304,74,17],[304,74,17],[308,69,18],[308,69,18],[308,69,18],[311,63,17],[311,63,17],[315,59,17],[315,59,17],[315,59,17],[318,53,16],[318,53,16],[323,50,14],[323,50,14],[323,50,14],[326,48,10],[326,48,10],[326,48,10]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:40:43.000Z"},{"id":750450,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":10,"tee":3,"made":0,"ballPath":"[[393,315,9],[393,315,9],[394,300,20],[394,300,20],[394,300,20],[400,272,26],[400,272,26],[401,236,30],[401,236,30],[401,236,30],[405,199,32],[405,199,32],[406,159,35],[406,159,35],[406,159,35],[408,119,36],[408,119,36],[407,79,36],[407,79,36],[407,79,36],[407,42,35],[407,42,35],[402,17,28],[402,17,28],[402,17,28],[402,2,18],[402,2,18]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:40:51.000Z"},{"id":750454,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":11,"tee":1,"made":1,"ballPath":"[[297,315,11],[297,315,11],[297,315,11],[298,295,23],[298,295,23],[298,262,29],[298,262,29],[298,262,29],[298,225,31],[298,225,31],[299,184,35],[299,184,35],[299,184,35],[302,142,37],[302,142,37],[306,99,36],[306,99,36],[306,99,36],[314,67,29],[314,67,29],[339,61,29],[339,61,29],[339,61,29],[360,68,23],[360,68,23],[370,80,19],[370,80,19],[370,80,19],[380,84,15],[380,84,15],[380,84,15],[384,84,9],[384,84,9]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:41:21.000Z"},{"id":750455,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":11,"tee":2,"made":0,"ballPath":"[[270,304,17],[270,304,17],[270,304,17],[264,281,26],[264,281,26],[257,249,29],[257,249,29],[257,249,29],[250,214,31],[250,214,31],[250,214,31],[244,177,33],[244,177,33],[240,139,35],[240,139,35],[240,139,35],[234,101,35],[234,101,35],[234,101,35],[231,66,35],[231,66,35],[229,33,34],[229,33,34],[229,33,34],[227,12,26],[227,12,26],[224,2,16],[224,2,16],[224,2,16]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:41:30.000Z"},{"id":750457,"userId":"ViwduRkvRCZkTVJNhRB9JSUMXvt1","gameId":71,"userGameId":92117,"mpGameId":0,"questGameId":0,"distance":11,"tee":3,"made":0,"ballPath":"[[391,314,10],[391,314,10],[392,301,19],[392,301,19],[399,276,26],[399,276,26],[399,276,26],[401,244,27],[401,244,27],[401,244,27],[405,211,31],[405,211,31],[406,176,33],[406,176,33],[406,176,33],[410,140,34],[410,140,34],[410,105,35],[410,105,35],[410,105,35],[412,71,35],[412,71,35],[411,41,34],[411,41,34],[411,41,34],[408,19,29],[408,19,29],[408,4,23],[408,4,23],[408,4,23]]","holeBounds":"[336,83,104]","created_at":"2024-01-17T20:41:38.000Z"}]')
    
    // Initial drawing
    drawHole();

    // Populate the dropdown with IDs
    ballPathDataArray.forEach(function(ballPathData) {
        var option = document.createElement("option");
        option.value = ballPathData.id;
        option.text = "ID: " + ballPathData.id;
        idFilter.appendChild(option);
    });

    // Function to clear the canvas
    function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawHole();
    }

    // Function to draw trajectories based on selected IDs
    function drawFilteredTrajectories() {
        clearCanvas();
        var selectedIds = Array.from(idFilter.selectedOptions).map(option => option.value);
        ballPathDataArray.forEach(function(ballPathData) {
            if (selectedIds.includes(String(ballPathData.id))) {
                let color = getRandomColor();
                let currentNumber = 1;
                let previousPosition = null;
                let ballPath = JSON.parse(ballPathData.ballPath);

                ballPath.forEach(function(position) {
                    let x = position[0];
                    let y = position[1];
                    if (!previousPosition || x !== previousPosition[0] || y !== previousPosition[1]) {
                        drawBall(x, y, color, currentNumber++);
                    } else {
                        drawBall(x, y, color);
                    }
                    previousPosition = [x, y];
                });
            }
        });
    }

    // Event listener for the filter button
    filterButton.addEventListener("click", drawFilteredTrajectories);


});
